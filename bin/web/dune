(executable
  (name index)
  (modes byte js)
  (preprocess (pps js_of_ocaml-ppx))
  (libraries spinal js_of_ocaml js_of_ocaml-lwt js_of_ocaml-lwt.graphics)
  (js_of_ocaml 
    (flags :standard --opt 3 --source-map --debug-info --disable staticeval --disable share --target-env browser --enable=with-js-error --enable=excwrap)
    (build_runtime_flags (:standard --target-env browser))))

; generated inside the src/lib 
;(rule
 ;(mode promote)
 ;(targets index.js)
 ;(deps index.bc.js)
 ;(action (copy index.bc.js index.js)))
